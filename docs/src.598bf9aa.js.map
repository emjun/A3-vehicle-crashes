{"version":3,"sources":["index.js"],"names":["console","log","d3","version","width","height","margin","padding","adj","timeConv","timeParse","make_graph","data_s","svg","select","append","attr","style","classed","then","data","slices","columns","slice","map","id","values","d","date","measurement","xScale","scaleLinear","rangeRound","yScale","domain","extent","max","c","yaxis","axisLeft","ticks","length","scale","xaxis","axisBottom","tickFormat","timeFormat","line","x","y","call","text","lines","selectAll","enter","datum","value","ghost_lines","on","selection","raise","transition","delay","duration","legend","parentNode","dataset","csv","require","button","document","getElementById","onclick","remove","slider","display","oninput","year"],"mappings":"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","file":"src.598bf9aa.js","sourceRoot":"../src","sourcesContent":["console.log('hello world');\nconsole.log(d3.version)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst width = 960;\nconst height = 500;\nconst margin = 5;\nconst padding = 5;\nconst adj = 100;\n\nconst timeConv = d3.timeParse(\"%I:%M%p\")\n\n\n\n\n\nfunction make_graph(data_s) {\n\nsvg = d3.select(\"div#container\").append(\"svg\")\n    .attr(\"preserveAspectRatio\", \"xMinYMin meet\")\n    .attr(\"viewBox\", \"-\"\n          + adj + \" -\"\n          + adj + \" \"\n          + (width + adj *3) + \" \"\n          + (height + adj*3))\n    .style(\"padding\", padding)\n    .style(\"margin\", margin)\n    .classed(\"svg-content\", true);\n\n\ndata_s.then(function(data) {\n    var slices = data.columns.slice(1).map(function(id) {\n        return {\n            id: id,\n            values: data.map(function(d){\n                return {\n                    date: timeConv(d.date),\n                    measurement: +d[id]\n                };\n            })\n        };\n    });\n   \n   \n//----------------------------SCALES----------------------------//\nxScale = d3.scaleLinear().rangeRound([0, height, ]);\nyScale = d3.scaleLinear().rangeRound([height, 0]);\nxScale.domain(d3.extent(data, function(d){\n    return timeConv(d.date)}));\n\nyScale.domain([(0), d3.max(slices, function(c) {\n    return d3.max(c.values, function(d) {\n        return d.measurement + 4; });\n        })\n    ]);\n   \n//-----------------------------AXES-----------------------------//\nyaxis = d3.axisLeft()\n    .ticks((slices[0].values).length)\n    .scale(yScale);\n   \n// const xaxis = d3.axisBottom()\n//     .ticks((slices[0].values).length)\n//     .scale(yScale);\n\nxaxis = d3.axisBottom()\n    // .ticks(d3.timeHour.every(1))\n    .tickFormat(d3.timeFormat('%I %p'))\n    .scale(xScale);\n   \n//----------------------------LINES-----------------------------//\nline = d3.line()\n    .x(function(d) { return xScale(d.date); })\n    .y(function(d) { return yScale(d.measurement); });\n   \n//-------------------------2. DRAWING---------------------------//\n//-----------------------------AXES-----------------------------//\nsvg.append(\"g\")\n    .attr(\"class\", \"axis\")\n    .attr(\"transform\", \"translate(0,\" + height + \")\")\n    .call(xaxis)\n\n    .append(\"text\")\n    .text(\"Time of Day (Hourly)\")    .attr(\"y\", -6)    .attr(\"dx\", \".75em\") .attr(\"x\", width / 2)\n    .style(\"text-anchor\", \"end\");\n\n   \nsvg.append(\"g\")\n    .attr(\"class\", \"axis\")\n    .call(yaxis)\n    .append(\"text\")\n    .attr(\"transform\", \"rotate(-90)\")\n    .attr(\"dy\", \".75em\")\n    .attr(\"y\", 6)\n    .style(\"text-anchor\", \"end\")\n    .text(\"Persons Involed in Fatal Crashes\");\n   \n//----------------------------LINES-----------------------------//\nlines = svg.selectAll(\"lines\")\n    .data(slices)\n    .enter()\n    .append(\"g\");\n\n    lines.append(\"path\")\n    .attr(\"class\", \"line\")\n    .attr(\"d\", function(d) { return line(d.values); });\n   \n    lines.append(\"text\")\n    .attr(\"class\",\"serie_label\")\n    .datum(function(d) {\n        return {\n            id: d.id,\n            value: d.values[d.values.length - 1]}; })\n    .attr(\"transform\", function(d) {\n            return \"translate(\" + (xScale(d.value.date) + 0)  \n            + \",\" + (yScale(d.value.measurement) + 5 )+ \")\"; })\n    .attr(\"x\", 5)\n    .text(function(d) { return (\"\") + d.id; });// LABEL OF LINe\n\n\n\nghost_lines = lines.append(\"path\")\n    .attr(\"class\", \"ghost-line\")\n    .attr(\"d\", function(d) { return line(d.values); });    \n\n//---------------------------EVENTS-----------------------------// \nsvg.selectAll(\".ghost-line\")\n    .on('mouseover', function() {\n        selection = d3.select(this).raise();\n        selection\n            .transition()\n            .delay(\"100\").duration(\"10\")\n            .style(\"stroke\",\"#ed3700\")\n            .style(\"opacity\",\"1\")\n            .style(\"stroke-width\",\"3\");\n// add the legend action\n        legend = d3.select(this.parentNode)\n            .select(\".serie_label\");\n        legend\n            .transition()\n            .delay(\"100\")\n            .duration(\"10\")\n            .style(\"fill\",\"#2b2929\");\n        })\n    .on('mouseout', function() {\n        selection = d3.select(this)\n        selection\n            .transition()\n            .delay(\"100\")\n            .duration(\"10\")\n            .style(\"stroke\",\"#d2d2d2\")\n            .style(\"opacity\",\"0\")\n            .style(\"stroke-width\",\"10\");\n            // add the legend action\n        legend = d3.select(this.parentNode)\n            .select(\".serie_label\");\n        legend\n            .transition()\n            .delay(\"100\")\n            .duration(\"10\")\n            .style(\"fill\",\"#d2d2d2\");\n    });\n\n});\n}\n\n\n// const dataset = d3.csv(require(\"/more_data.csv\"));\n\n\ndataset = d3.csv(require(\"/csv/2017_r.csv\"));\nmake_graph(dataset);\n\n\nvar button = document.getElementById('option');\n\n\nbutton.onclick = function(){\n\n    console.log(\"fuck\");\n    d3.select(\"div#container\").selectAll(\"*\").remove();\n\n\n    dataset = d3.csv(require(\"/csv/2016_r.csv\"));\n    make_graph(dataset)\n\n}\n\n\nvar slider = document.getElementById('myRange');\nvar display = document.getElementById('outputId');\n\nslider.value = 2017\ndisplay.value = 2017\n\nslider.oninput = function() {\n    display.value = slider.value\n\n    year = slider.value\n\n    d3.select(\"div#container\").selectAll(\"*\").remove();\n\n    make_graph(dataset)\n}\n\n"]}